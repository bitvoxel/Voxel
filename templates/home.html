<html>
  <head>
    <title>Kazhak - An intuitive chatbot</title>
    <link rel="stylesheet" href="{{url_for('static', filename='base.css')}}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
  </head>

  <body>
    <div id="header_wrapper">
      <div id="header">
        <div id="title">Kazhak</div>
        A School Management System With An Intuitive Chat Bot
        <br>
        <br>

        <nav>
          <ul>
            <li><a href="/" style="font-size: 3vh;">Chatbot</a></li>
            <li><a href="/student" style="font-size: 3vh;">Students</a></li>
            <li><a href="/student" style="font-size: 3vh;">Teachers</a></li>
          </ul>
        </nav>

      </div>
    </div>
    <br>
    <div id="chat_box">
      <div id="chat">
        <div class="message_box">
          <div class="bog" id="bg">Kazhak</div>
          <div class="content">Hello there</div>
        </div>
      </div>
      <div id="prompt">
        <input type="text" class="inp" id="inp" placeholder="Type a message...">
        <button id="but" onclick="submit()">Send</button>
      </div>
    </div>
  </body>
  <footer>
    <p style="text-align: center;">Â© ( 2024 Vignesh R | 6095 | 2K2K- CRUZ). All rights reserved.</p>
</footer>
</html>
<style>
  #prompt{
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 10px;
  }

  #chat_box{
    display: flex;
    flex-direction: column;
    width: fit-content;
    border: 0.5px solid white;
    border-radius: 5px;
    justify-self: center;
  }
  #but{
    width: 3em;
    height: 3em;
    padding-inline: 0;
    background-color: transparent;
    color: white;
    border: 0.5px solid white;
    border-radius: 5px;
  }

  #but:hover{
    background-color: #667db6;
  }

  #bg{
    font-size: larger;
    width: fit-content;
    padding-right: 15px;
  }
  #chat{
    width: 70vw;
    min-height: 40vh;
    margin: 10px;
    overflow-y: auto;
  }


  .message_box{
        background-color: black;
        color: white;
        padding: 10px;
        margin-block: 20px;
    }
    .content{
        font-weight: 300;
        margin-block: 5px;
    }


</style>

<script>
  function addMessage(name,content,typ) {
    var html=`<div class="message_box" style="justify-self:flex-${typ}">
          <div class="bog" id="bg">${name}</div>
          <div class="content">${content}</div>
            </div>`
    document.getElementById("chat").innerHTML+=html
    document.getElementById("chat").scrollTop = document.getElementById("chat").scrollHeight;
  }

  async function submit(message=document.getElementById('inp').value) {
    document.getElementById('inp').focus()
    document.getElementById('inp').select()
    addMessage('You',message,"end")
    document.getElementById('inp').value=""
    const response = await fetch("/msg", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({ message: message}),
            });

            const data = await response.json();
            addMessage('Kazhak',data['response'],"start")
  }

submit("What can you do?")

</script>